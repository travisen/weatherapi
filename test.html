<!DOCTYPE html>
<!--
Update your function that makes calls to Open Weather Map to accept either a zip code or a city and state via a form (there should be an input for both and depending on which one is used your page should construct the correct URL), add a button to submit that data and display results in a reasonable way to users. It should at least show the city, current temperature and humidity.
-->

<html>
  <head>
    <script>
      //document.querySelector("input").focus();

      document.addEventListener('DOMContentLoaded', bindButtons);

      function bindButtons(){
        document.getElementById('zipSubmit').addEventListener('click', function(event) {
        var req = new XMLHttpRequest();
        var payload = {zip:null, city: null, state: null};
        // saves value of field zipIn to payload.zip
        payload.zip = document.getElementById('zipIn').value; 

        if (payload.zip != null) {
          req.open("GET", "http://api.openweathermap.org/data/2.5/weather?zip=" + payload.zip + 
            ",us&appid=13501a8f3bb553303d9f69da0c0027cc", false);
        }
        
        if (payload.city != null) {
          req.open("GET", "http://api.openweathermap.org/data/2.5/weather?zip=" + payload.zip + 
            ",us&appid=13501a8f3bb553303d9f69da0c0027cc", false);
        }
        
        req.send(null);
        //event.preventDefault();
        var response = JSON.parse(req.responseText);
        console.log(response.name);
        console.log(response);
        document.getElementById('city').textContent = response.name;
        document.getElementById('temp').textContent = response.main.temp;
        document.getElementById('humidity').textContent = response.main.humidity;

        event.preventDefault();
      })
    }

    </script>
  </head>
  <body>
    <h1>Weather</h1>
    <form>
      <fieldset>
        <legend> <h2>Zipcode Submission</h2> </legend>
        <p><input id="zipIn" type="text"
         value="enter zip"> Zipcode</p>
         <input type="submit" id="zipSubmit">
      </fieldset>
    </form>

    <form>
      <fieldset>
        <legend> <h2>City, State Submission</h2> </legend>
        <p><input id="cityIn" type="text"
         value="enter city, state"> City and State</p>
         <input type="submit" id="zipSubmit">
      </fieldset>
    </form>
       <!--
      <p><input id="city" type="text" 
        value="enter city, state">
       City and State</p>-->



    <h2>Results</h2>
    <div>City: <span id="city"></span></div>
    <div>Temp: <span id="temp"></span>K</div>
    <div>Humidity: <span id="humidity"></span>%</div>

  </body>
</html>